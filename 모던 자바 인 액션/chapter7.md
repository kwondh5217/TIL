### 병렬 처리
- 스트림 API가 지원하는 기능 중 하나는 병렬 처리이다.
- 자바 7 문법을 사용하여 병렬처리를 하기 위해서는 병렬 처리를 하기 위한 스레드 풀을 생성 및 관리를 개발자가 명시적으로 해주어야 한다.
- 또한 Race Condition 을 고려하여 동시성 제어도 필수이다. 이러한 작업은 병렬 처리의 구현 난이도를 올리는 요소가 된다.
- 스트림 API는 ForkJoinPool 스레드 풀을 사용하여 병렬처리를 지원한다.
- ForkJoinPool 은 런타임 환경에서 가용할 수 있는 코어를 사용하여 병렬 처리에 필요한 적절한 스레드 풀을 관리한다.

```
menu.stream()
	.parallel() // 병렬 처리
	.collect(toList());
```
- 위 코드에서 parallel() 은 중간 연산으로 최종 연산이 호출되기 전에는 아무런 일이 일어나지 않는다.
- 최종 연산이 호출될 때 병렬 처리를 해야한다는 boolean 플래그를 표현하기 위한 메서드라고 생각하면 된다.

#### 병렬 처리는 항상 빠를까?
- 처리해야하는 연산과 스트림의 형태에 따라 빠를 수도 있고, 오히려 더 느릴 수도 있다.
- 순차적으로 실행할 수 밖에 없는 계산이거나, 전체 스트림이 준비되지 않아 청크를 분할할 수 없는 경우에는 스레드를 할당하는 오버헤드만 증가하여 성능이 오히려 나빠질 수 있다.
- 또한 작업의 비용보다 코어 간의 데이터 이동 비용이 더 클 경우 성능어 저하될 수 있다.
- 따라서 내부 구조를 잘 이해하고 사용하는 작업의 형태를 잘 파악하여 사용하여야 성능 향상을 노릴 수 있다.
