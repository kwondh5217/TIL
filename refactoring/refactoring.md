# 리팩토링

각 챕터는 리팩토링에서 사용되는 냄새를 기준으로 정리해둔 것.

1. 이해하기 힘든 이름 - 설명이 필요 없도록 명시적으로 이름을 짓는 것은 내가 작성한 코드를 다른 사람이 이해하는 데에 시간을 줄일 수 있다.
   1. 함수명
   2. 변수명
   3. 필드명

2. 중복 코드 - 중복된 코드가 있을 때 그 코드의 변경이 일어난다면 적용된 모든 중복된 코드들을 찾아서 수정해야한다. 이는 변경에 유연하지 못하다.
   1. 함수 추출하기 - 의도와 구현을 분리하여 추출하자. 만약 이미 충분히 함수의 의도가 잘 읽힌다면 상관없지만 상세한 구현내용을 보고 있는 것 같다면 함수를 추출하여 한눈에 잘 읽히도록 만들자.

   2. 코드 정리하기 - 변수를 사용하는 시점에서 선언과 상단에 한번에 선언하는 두가지 방식이 있는데, 변수를 사용하는 시점에서 선언하는 것이 문맥상 쉽게 읽히며, 함수를 추출할 때에도 편리하다. 두가지 방식 중 항상 통일하여 사용해야지 중복된 코드를 찾기가 쉽다.

   3. 메소드 올리기 - A 클래스를 상속받는 B,C 클래스에서 동일한 메소드를 구현하고 있다면 이를 A클래스로 pull up 하여 중복 코드를 제거하고 유지 보수에서도 부모의 클래스에서 수정하면 된다.

3. 긴 함수 - 함수의 라인이 긴 경우 대부분의 경우에는 함수추출을 통해서 리팩토링을 진행하면 가독성이 좋은 코드로 변할 수 있다. 하지만 많은 함수를 추출하게 되면 파라미터가 많아지는 문제가 생길 수 있다. 이게 왜 문제냐면 파라미터의 갯수가 많아지게 되면 어떤 순서에 어떤 인자값을 넣어줘야하는지 헷갈리게 되기 때문이다.
   1. 임시변수 질의함수로 변경 - 주문 정보를 가진 리스트에서 각각의 주문 정보를 순회하며 주문 금액을 계산하고 출력하는 함수가 있다고 가정하자. 이때 한 라인에서 처리하던 주문금액계산, 출력을 두 개의 함수로 추출할 수 있을 것이다. 하지만 출력하는 함수에 파라미터로 주문금액을 받게되면 파라미터가 많아지는 것이다. 이럴 경우 출력함수의 인자값으로 주문정보를 받고, 함수 내에서 주문금액을 계산하는 함수를 호출하여 파라미터를 줄일 수 있다.

   2. 매개변수 객체 만들기 - 다른 함수들에서 공통적으로 두개 이상의 파라미터를 항상 같이 받고 있는 상황이라면 둘은 같은 객체로 묶는 것이 의미를 파악하기에 용이할 수 있다.

   3. 객체 통째로 넘기기 - 함수를 호출할 때 파라미터로 값을 넘겨줄 때 방법은 크게 두가지이다. 첫째는 primitive 타입으로 넘겨주는 것. 두번째는 객체를 넘겨주고 객체의 필드에 접근해서 데이터에 접근하는 법. preserve whole object는 primitive 타입으로 값을 넘겨주는 것이 아닌, 객체 통째로 넘기는 리팩토링 기술을 뜻한다. 이를 적용하기 위해서 고려해야할 사항들이 몇가지 있다. 
      1. preserve whole object 를 적용하게 되면 함수는 객체에 의존을 하게 된다. 이럴 경우에 해당 함수가 객체에 의존하는 것이 맞는 지를 적절히 판단하고 적용하여야 한다. primitive 타입으로 다른 도메인에서도 사용될 함수라면 preserve whole object 를 적용하지 않는 것이 좋을 수도 있다.
      